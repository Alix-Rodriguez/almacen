<app-breadcrumbs [miga]="miga"></app-breadcrumbs>
<ngb-alert #selfClosingAlert *ngIf="successMessage" type={{type}} (closed)="successMessage = ''">{{
    successMessage}}</ngb-alert>
<form [formGroup]='checkoutForm'>
    <div class="container">
        <div class="row mt-4 mb-2 mr-5">
            <label class="text-end col-2">Proveedor</label>
            <div class="col">
                <select formControlName="id_proveedor" name="id_proveedor" id="id_proveedor" class="form-select">
                    <option value="" disabled selected>Seleccione</option>
                    <option *ngFor="let li of provedore" value={{li.id}}>{{li.nombre_proveedor}} </option>
                </select>
            </div>
            <label class="text-end col-2">Empresa</label>
            <div class="col">
                <select formControlName="id_empresa" name="id_empresa" id="id_empresa" class="form-select">
                    <option value="" disabled selected>Seleccione</option>
                    <option *ngFor="let li of empresa" value={{li.id}}>{{li.nombre_empresa}} </option>
                </select>
            </div>

        </div>

        <div class="row mt-4 mb-2 mr-5">
            <label class="text-end col-2">Almacen</label>
            <div class="col">
                <select formControlName="id_almacen" name="id_almacen" id="id_almacen" class="form-select">
                    <option value="" disabled selected>Seleccione</option>
                    <option *ngFor="let li of almacen" value={{li.id}}>{{li.nombre}} </option>
                </select>
            </div>
            <label class="text-end col-2">Indicaciones</label>
            <div class="col">
                <input type="text"  formControlName="indicaciones" name="indicaciones" id="indicaciones" placeholder="Ingrese Indicaciones" class="form-control">
            </div>
            
        </div>
        
        <div class="row mt-4 mb-3 mr-5">
            <label class="text-end col-2">Observaciones</label>
            <div class="col-4">
                <input type="text" formControlName="observacion" name="observacion" id="observacion" placeholder="Ingrese Observaciones" class="form-control">
            </div>
        </div>

        <div class="row mt-4 mb-3 mr-5">
            <label class="text-end col-7">Fecha de programacion</label>
            <div class="col-1 text-center">
                <input (click)="activar()" class="form-check-input " type="radio">
            </div>
           
            <div   class="col-3">
                <div #input  class="p input-group">
                    <input  formControlName="fecha" name="fecha" id="fecha"
                        class="form-control" placeholder="yyyy-mm-dd"  ngbDatepicker #d="ngbDatepicker" />
                    <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button"><svg
                            xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-calendar3" viewBox="0 0 16 16">
                            <path
                                d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z" />
                            <path
                                d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                        </svg></button>
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-end mt-5 ml-1">
            <button type="button" (click)="open(mymodalProducto)" class="col-2 btn border-dark border-2">Agregar
                Producto</button>

            <!-- MODAL DE PRODUCTO -->
            <ng-template #mymodalProducto let-modal>
                <app-programacion-agg-producto></app-programacion-agg-producto>

                <div class="d-flex justify-content-start ml-1 modal-body">
                    <button type="button" class="col-4 btn btn-outline-dark"
                        (click)="modal.close('Save click')">Aceptar</button>
                </div>

            </ng-template>

        </div>
    </div>
</form>

<div class="container-fluid mt-3">
    <table class="table table-bordered table-striped  table-hover ">
        <thead>
            <tr>
                <th scope="col">Sku</th>
                <th scope="col">Producto</th>
                <th scope="col">Uni.Medida</th>
                <th scope="col">Cantidad</th>
                <th scope="col">Acciones</th>


            </tr>
        </thead>
        <tbody>
            <!--  -->
            <tr *ngFor="let pos of producto; index as i" >
                <td>{{pos.sku}}</td>
                <td>{{pos.descripcion}}</td>
                <td>{{pos.id_unidad_de_medida}} </td>
                 <div class="col">
                    <input (input)="saveCantidad($event.target.value,i)" type="text" placeholder="Ingrese Cantidad" class="form-control">
                </div>
                <td>
                    <button (click)="Eliminar(i)" class="btn btn-danger padding" ></button>
                </td>
            </tr>
        </tbody>
    </table>

    <div class="d-flex justify-content-start mt-5 ml-1">
        <button [disabled]="checkoutForm.invalid" (click)="onSubmit()" type="button"
            class="col-2 btn btn-dark ">Guardar</button>
    </div>